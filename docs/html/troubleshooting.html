
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Troubleshooting</title><meta name="generator" content="MATLAB 9.6"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2020-01-26"><meta name="DC.source" content="troubleshooting.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>Troubleshooting</h1><!--introduction--><p>Often finding the source of a problem seems daunghting when faced with a huge Rigbox error stack.  Below are some tips on how to quickly get to the root of the issue and hopefully solve it.</p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Update the code</a></li><li><a href="#2">Examining the stack</a></li><li><a href="#3">Paths</a></li><li><a href="#4">Reverting</a></li><li><a href="#5">Posting an issue on Github</a></li><li><a href="#6">FAQ</a></li><li><a href="#7">Error and warning IDs</a></li><li><a href="#8">Undocumented IDs</a></li></ul></div><h2 id="1">Update the code</h2><p>Check what version of the code you're using and that you're up-to-date:</p><pre class="codeinput">git.runCmd(<span class="string">'status'</span>); <span class="comment">% Tells me what branch I'm on</span>
git.update(0); <span class="comment">% Update now</span>

<span class="comment">% If you're on a development or feature branch try moving to the master</span>
<span class="comment">% branch, which should be most stable.</span>
git.runCmd(<span class="string">'checkout master'</span>); git.update(0);
</pre><h2 id="2">Examining the stack</h2><p>Don't be frightened by a wall of red text!  Simply start from the top and work out what the errors might mean and what part of code they came from. The error at the top is the one that ultimately caused the crash.  Try to determine if this is a MATLAB builtin function, e.g.</p><pre class="language-matlab">Warning: Error occurred <span class="string">while</span> <span class="string">executing</span> <span class="string">the</span> <span class="string">listener</span> <span class="string">callback</span> <span class="string">for</span> <span class="string">event</span> <span class="string">UpdatePanel</span> <span class="string">defined</span> <span class="string">for</span> <span class="string">class</span> <span class="string">eui.SignalsTest:</span>
Error <span class="string">using</span> <span class="string">griddedInterpolant</span>
Interpolation <span class="string">requires</span> <span class="string">at</span> <span class="string">least</span> <span class="string">two</span> <span class="string">sample</span> <span class="string">points</span> <span class="string">in</span> <span class="string">each</span> <span class="string">dimension.</span>
</pre><pre class="language-matlab">Error <span class="string">in</span> <span class="string">interp1</span> <span class="string">(line 151)</span>
F = griddedInterpolant(X,V,method);
</pre><pre class="language-matlab">TODO <span class="string">Add</span> <span class="string">better</span> <span class="string">example</span> <span class="string">of</span> <span class="string">builtin</span> <span class="string">errors</span>
</pre><p>If you're debugging a signals experiment definition, check for the line in your experiment where this particular builtin function was called. NB: You can check whether it is specific to your experiment by running one of the example experiment definitions such as advancedChoiceWorld.m, found in signals/docs/examples.  If this runs without error then you're problem may be specific to your experiment.  You should see the name of your definition function and exp.SignalsExp in the stack if they are involved.</p><p>If you don't know what a function is, try checking the documentation. Consider the following:</p><pre>Error using open
Invalid number of channels</pre><pre>Error in audstream.fromSignal (line 16)
  id = audstream.open(sampleRate, nChannels, devIdx);
[...]</pre><p>If you're unsure what `audstream.fromSignal` does, try typing `doc audstream`.  This should tell you that the package deals with audio devices in signals.  In this case the issue might be that your audio settings are incorrect.  Take a look at the audio section of `docs\setup\hardware_config.m` and see if you can setup your audio devices differently.</p><h2 id="3">Paths</h2><p>By far the most common issue in Rigbox relates to problems with the MATLAB paths.  Check the following:</p><div><ol><li>Do you have a paths file in the +dat package?  Check the location by running `which dat.paths`.  Check that a file is  on the paths and that it's the correct one.</li><li>Check the paths set in this file.  Run `p = dat.paths` and inspect the output.  Perhaps a path is set  incorrectly for one of the fields.  Note that custom rig paths overwrite  those written in your paths file.  More info found in  `using_dat_package` and `paths_template`.</li><li>Do you have path conflicts?  Make sure MATLAB's set paths don't include other functions that have the  same name as Rigbox ones.  Note that any functions in ~/Documents/MATLAB  take precedence over others.  If you keep seeing the following warning  check that you've set the paths correctly:   Warning: Function system has the same name as a MATLAB builtin. We   suggest you rename the function to avoid a potential name conflict.  This warning can occur if the tests folder has been added to the paths  by mistake.  Always set the paths by running `addRigboxPaths` and never  set them manually as some folders should not be visible to MATLAB.</li><li>Check your working directory  MATLAB prioritizes functions found in your working directory over any  others in your path list so try to change into a 'safe' folder before  re-running your code:   pwd % display working directory   cd ~/Documents/MATLAB</li><li>Check your variable names  Make sure your variable names don't shadow a function or package in  Rigbox, for instance if in an experiment definition you create a varible  called `vis`, you will no longer be able to access functions in the +vis  package from within the function:   vis = 23;   img = vis.image(t);   Error: Reference to non-existent field 'image'.</li></ol></div><h2 id="4">Reverting</h2><p>If these errors only started occuring after updating the code, particularly if you hadn't updated in a long time, try reverting to the previous version of the code.  This can help determine if the update really was the culprit and will allow you to keep using the code on outdated machines.  Previous stable releases can be found on the Github page under releases.  NB: For the most recent stable code always pull directly from the master branch</p><h2 id="5">Posting an issue on Github</h2><p>If you're completely stumped, open an issue on the Rigbox Github page (or alyx-matlab if you think it's related to the Alyx database).  When creating an issue, read the bug report template carefully and be sure to provide as much information as possible.</p><p>If you tracked down the problem but found the error to be confusing or too vague, feel free to post a feature request describing how better to present the error.  This is an area in need of improvment. You could also make a change yourself and submit a pull request.  For more info see CONTRIBUTING.md</p><h2 id="6">FAQ</h2><p>Below are some frequently asked questions and suggestions for fixing them.  Note there are plenty of other FAQs in the various setup scripts with more specific information.</p><h2 id="7">Error and warning IDs</h2><p>Below is a list of Rigbox error &amp; warning IDs.  This list is currently incomplete and there aren't yet very standard.  Typically the ID has the following structure: module:package:function:error</p><p>These are here for search convenience and may soon contain more detailed troubleshooting information.</p><pre class="codeinput"><span class="comment">% ..:..:..:copyPaths</span>
<span class="comment">% Problem:</span>
<span class="comment">%  In order to load various essential configuration files, and to load and</span>
<span class="comment">%  save experimental data, user specific paths must be retrieved via calls</span>
<span class="comment">%  to |dat.paths|.  This error means the function is not on MATLAB's search</span>
<span class="comment">%  path.</span>
<span class="comment">%</span>
<span class="comment">% Solution:</span>
<span class="comment">%  Add your +dat\paths.m file to MATLAB's search path.  A template is</span>
<span class="comment">%  present in \docs\setup\paths_template.m.  This file is automatically</span>
<span class="comment">%  copied by addRigboxPaths to +dat\.  If you haven't already done so, run</span>
<span class="comment">%  |addRigboxPaths| to ensure all other paths have been correctly set.</span>
<span class="comment">%</span>
<span class="comment">%  See also README.md for further setup information.</span>
<span class="comment">%</span>
<span class="comment">% IDs</span>
<span class="comment">%  Rigbox:git:update:copyPaths</span>
<span class="comment">%  signals:test:copyPaths</span>

<span class="comment">% ..:..:noRemoteFile</span>
<span class="comment">% Problem:</span>
<span class="comment">%  % TODO Add problem &amp; solution for noRemoteFile error</span>
<span class="comment">%</span>
<span class="comment">% Solution:</span>
<span class="comment">%</span>
<span class="comment">%</span>
<span class="comment">% IDs</span>
<span class="comment">%  Rigbox:mc:noRemoteFile</span>

<span class="comment">% ..:..:..:notInTest</span>
<span class="comment">% Problem:</span>
<span class="comment">%  This occurs when a mock function is called when the INTEST global</span>
<span class="comment">%  variable is not set.  These mock functions shadow Rigbox and builtin</span>
<span class="comment">%  functions, meaning they have the same name.</span>
<span class="comment">%</span>
<span class="comment">% Solution:</span>
<span class="comment">%  If this function was called during a test, add the following to the top</span>
<span class="comment">%  of your test or in the constructor:</span>
<span class="comment">%    global INTEST</span>
<span class="comment">%    INTEST = true</span>
<span class="comment">%  Ensure that this is cleared during the teardown:</span>
<span class="comment">%    addteardown(@clear, INTEST) % If in a class</span>
<span class="comment">%    mess = onCleanup(@clear, INTEST) % If in a function</span>
<span class="comment">%</span>
<span class="comment">%  If the mock in question is a class, set the InTest flag instead of the</span>
<span class="comment">%  global variable:</span>
<span class="comment">%    mock = MockDialog; % An example using MockDialog class</span>
<span class="comment">%    mock.InTest = true;</span>
<span class="comment">%    addteardown(@clear, MockDialog) % Clear mock class when done</span>
<span class="comment">%    mess = onCleanup(@clear, MockDialog) % If in a function</span>
<span class="comment">%</span>
<span class="comment">%  If you are in not running tests, ensure that tests/fixtures is not in</span>
<span class="comment">%  your MATLAB path and that you are in a different working directory.  It</span>
<span class="comment">%  is best to remove all Rigbox paths and readd them using `addRigboxPaths`</span>
<span class="comment">%</span>
<span class="comment">% IDs</span>
<span class="comment">%  Rigbox:tests:system:notInTest</span>
<span class="comment">%  Rigbox:tests:modDate:notInTest</span>
<span class="comment">%  Rigbox:tests:paths:notInTest</span>
<span class="comment">%  Rigbox:tests:pnet:notInTest</span>
<span class="comment">%  Rigbox:tests:modDate:missingTestFlag % TODO change name</span>
<span class="comment">%  Rigbox:MockDialog:newCall:InTestFalse</span>

<span class="comment">% ..:..:..:behaviourNotSet</span>
<span class="comment">% Problem:</span>
<span class="comment">%  A mock function was called while in a test, however the behaviour for</span>
<span class="comment">%  this particular input has not been defined.</span>
<span class="comment">%</span>
<span class="comment">% Solution:</span>
<span class="comment">%  If not testing a specific behavior for this function's output, simply</span>
<span class="comment">%  supress the warning in your test, remembering to restore the warning</span>
<span class="comment">%  state:</span>
<span class="comment">%    origState = warning;</span>
<span class="comment">%    addteardown(@warning, origState) % If in a class</span>
<span class="comment">%    mess = onCleanup(@warning, origState) % If in a function</span>
<span class="comment">%    warning('Rigbox:MockDialog:newCall:behaviourNotSet', 'off')</span>
<span class="comment">%</span>
<span class="comment">%  If you're specifically testing the behavior when the mock returns a</span>
<span class="comment">%  particular output then check that you've set the input-output map</span>
<span class="comment">%  correctly: usually this is done by first calling the mock with input</span>
<span class="comment">%  identical to function under test as well as the output you want to see.</span>
<span class="comment">%  Check the input is formatted correctly.  For more information see the</span>
<span class="comment">%  help of the particular mock you are using.</span>
<span class="comment">%</span>
<span class="comment">% IDs</span>
<span class="comment">%  Rigbox:tests:system:valueNotSet % TODO change name</span>
<span class="comment">%  Rigbox:MockDialog:newCall:behaviourNotSet</span>
<span class="comment">%</span>

<span class="comment">% ..:..:mkdirFailed</span>
<span class="comment">% Problem:</span>
<span class="comment">%  MATLAB was unable to create a new folder on the system.</span>
<span class="comment">%</span>
<span class="comment">% Solution:</span>
<span class="comment">%  In general Rigbox code only creates new folders when a new experiment is</span>
<span class="comment">%  created.  The folders are usually created in the localRepository and</span>
<span class="comment">%  mainRepository locations that are set in your paths file.  If either of</span>
<span class="comment">%  these are remote (e.g. a server accessed via SMB) check that you can</span>
<span class="comment">%  navigate to the location in Windows' File Explorer (sometimes the access</span>
<span class="comment">%  credentials need setting first).  If you can, next check the permissions</span>
<span class="comment">%  of these locations.  If the folders are read-only, MATLAB will not be</span>
<span class="comment">%  able to create a new experiment folder there.  Either change the</span>
<span class="comment">%  permissions or set a different path in |dat.paths|.  One final thing to</span>
<span class="comment">%  check is that the folder names are valid: the presence of a folder that</span>
<span class="comment">%  is not correctly numbered in the subject's date folder may lead to an</span>
<span class="comment">%  invalid expRef.  Withtin a date folder there should only be folders name</span>
<span class="comment">%  '1', '2', '3', etc.</span>
<span class="comment">%</span>
<span class="comment">% IDs</span>
<span class="comment">%  Alyx:newExp:mkdirFailed</span>
<span class="comment">%  Rigbox:dat:newExp:mkdirFailed</span>
<span class="comment">%</span>

<span class="comment">% ..:newExp:expFoldersAlreadyExist</span>
<span class="comment">% Problem:</span>
<span class="comment">%  The folder structure for a newly generated experiment reference is</span>
<span class="comment">%  already in place.</span>
<span class="comment">%</span>
<span class="comment">%  Experiment references are generated based on subject name, today's date</span>
<span class="comment">%  and the experiment number, which is found by looking at the folder</span>
<span class="comment">%  structure of the main repository.  In a subject's experiment folder for</span>
<span class="comment">%  a given date there are numbered folders.  When running a new experiment,</span>
<span class="comment">%  the code takes the folder name with the largest number and adds 1.  It</span>
<span class="comment">%  then checks that this numbered folder doesn't exist in the other</span>
<span class="comment">%  repositories.  If it does, an error is thrown so that no previous</span>
<span class="comment">%  experiment data is overwritten.</span>
<span class="comment">%</span>
<span class="comment">% Solution:</span>
<span class="comment">%  Check the folder structure for all your repositories (namely the</span>
<span class="comment">%  localRepository and mainRepository set in |dat.paths|).  It may be that</span>
<span class="comment">%  there is an empty experiment folder in the localRepository but not the</span>
<span class="comment">%  mainRepository, in which case you can delete it.  Alternatively, if you</span>
<span class="comment">%  find a full experiment folder in the local but not the main, copy it</span>
<span class="comment">%  over so that the two match.  This will avoid a duplicate expRef being</span>
<span class="comment">%  created (remember, new expRefs are created based on the folder structure</span>
<span class="comment">%  of the mainRepository only).</span>
<span class="comment">%</span>
<span class="comment">% IDs</span>
<span class="comment">%  Alyx:newExp:expFoldersAlreadyExist</span>
<span class="comment">%  Rigbox:dat:newExp:expFoldersAlreadyExist</span>
<span class="comment">%</span>

<span class="comment">% ..:..:expRefNotFound</span>
<span class="comment">% Problem:</span>
<span class="comment">%  The experiment reference string does not correspond to the folder</span>
<span class="comment">%  structure in your mainRepository path.  Usually determined via a call to</span>
<span class="comment">%  |dat.expExists|.</span>
<span class="comment">%</span>
<span class="comment">% Solution:</span>
<span class="comment">%  Check that the mainRepository paths are the same on both the computer</span>
<span class="comment">%  that creates the experiment (e.g. MC) and the one that loads the</span>
<span class="comment">%  experiment (e.g. the one that runs |srv.expServer|).  For an experiment</span>
<span class="comment">%  to exist, the subject &gt; date &gt; sequence folder structure should exist in</span>
<span class="comment">%  the mainRepository.  To see the mainRepository location, run the</span>
<span class="comment">%  following:</span>
<span class="comment">%    getOr(dat.paths, 'mainRepository')</span>
<span class="comment">%  For example if the output is '\\server\Subjects\' then for the expRef</span>
<span class="comment">%  '2019-11-25_1_test' to exist, the following folder should exist:</span>
<span class="comment">%  \\server\Subjects\test\2019-11-25\1</span>
<span class="comment">%</span>
<span class="comment">% IDs</span>
<span class="comment">%  Rigbox:srv:expServer:expRefNotFound</span>

<span class="comment">% ----- ! PTB - ERROR: SYNCHRONIZATION FAILURE ! ----</span>
<span class="comment">% Problem:</span>
<span class="comment">%   To quote PsychToolbox: One or more internal checks indicate that</span>
<span class="comment">%   synchronization of Psychtoolbox to the vertical retrace (VBL) is not</span>
<span class="comment">%   working on your setup.This will seriously impair proper stimulus</span>
<span class="comment">%   presentation and stimulus presentation timing!</span>
<span class="comment">%</span>
<span class="comment">% Solution:</span>
<span class="comment">%   There are many, many reasons for this error.  Here's a quick list of</span>
<span class="comment">%   things to try, in order:</span>
<span class="comment">%</span>
<span class="comment">%   # Simply re-trying a couple of times.  Sometimes it happens</span>
<span class="comment">%   sporadically.</span>
<span class="comment">%   # Check the monitor(s) are on and plugged in.  If you're using</span>
<span class="comment">%   multiple monitors they should be of the same make and model.  If they</span>
<span class="comment">%   aren't, try with just one monitor first.</span>
<span class="comment">%   # If you're using multiple screens in NVIDEA's 'Mosaic' mode, the</span>
<span class="comment">%   settings may have changed: sometimes Mosiac becomes deactivated and you</span>
<span class="comment">%   should set it up again.</span>
<span class="comment">%   # If you're using a remote connection for that computer it may be</span>
<span class="comment">%   interfering with the graphics settings.  Examples of a remote</span>
<span class="comment">%   connection include VNC servers, TeamViewer and Windows Remote Desktop.</span>
<span class="comment">%   Try opening the PTB Window without any of these remote services.</span>
<span class="comment">%   # Update the graphics card drivers and firmware.  This often helps.</span>
<span class="comment">%   # Read the PTB docs carefully and follow their suggestions.  The docs</span>
<span class="comment">%   can be found at http://psychtoolbox.org/docs/SyncTrouble.</span>
<span class="comment">%   # If all else fails.  You can skip these tests and check that there is</span>
<span class="comment">%   no taring manually.  This is not recommended but can be done by setting</span>
<span class="comment">%   your stimWindow object's PtbSyncTests property to false:</span>
<span class="comment">%     stimWindow = getOr(hw.devices([],false), 'stimWindow');</span>
<span class="comment">%     stimWindow.PtbSyncTests = false;</span>
<span class="comment">%     hwPath = fullfile(getOr(dat.paths, 'rigConfig'), 'hardware.mat');</span>
<span class="comment">%     save(hwPath, 'stimWindow', '-append')</span>
</pre><h2 id="8">Undocumented IDs</h2><pre>Below is a list of all error and warning ids.</pre><pre class="codeinput"><span class="comment">% Rigbox:git:runCmd:nameValueArgs</span>
<span class="comment">% Rigbox:git:runCmd:gitNotFound</span>
<span class="comment">% Rigbox:git:update:valueError</span>
<span class="comment">%</span>
<span class="comment">% Rigbox:hw:calibrate:noscales</span>
<span class="comment">% Rigbox:hw:calibrate:deadscale</span>
<span class="comment">% Rigbox:hw:calibrate:partialPVpair</span>
<span class="comment">%</span>
<span class="comment">% Rigbox:srv:unexpectedUDPResponse</span>
<span class="comment">% Rigbox:srv:unexpectedUDP</span>
<span class="comment">% Rigbox:srv:expServer:noHardwareConfig</span>
<span class="comment">%</span>
<span class="comment">% Rigbox:dat:expPath:NotEnoughInputs</span>
<span class="comment">% Rigbox:exp:SignalsExp:NoScreenConfig</span>
<span class="comment">% Rigbox:exp:Parameters:wrongNumberOfColumns</span>
<span class="comment">%</span>
<span class="comment">% Rigbox:dat:expFilePath:NotEnoughInputs</span>
<span class="comment">%</span>
<span class="comment">% Rigbox:MockDialog:newCall:EmptySeq</span>
<span class="comment">%</span>
<span class="comment">% Rigbox:exp:SignalsExp:noTokenSet</span>
<span class="comment">%</span>
<span class="comment">% Rigbox:eui:choiceExpPanel:toolboxRequired</span>
<span class="comment">% Rigbox:setup:toolboxRequired</span>
<span class="comment">%</span>
<span class="comment">% Alyx:newExp:subjectNotFound</span>
<span class="comment">% Alyx:registerFile:InvalidPath</span>
<span class="comment">% Alyx:registerFile:UnableToValidate</span>
<span class="comment">% Alyx:registerFile:EmptyDNSField</span>
<span class="comment">% Alyx:registerFile:InvalidRepoPath</span>
<span class="comment">% Alyx:registerFile:InvalidFileType</span>
<span class="comment">% Alyx:registerFile:InvalidFileName</span>
<span class="comment">% Alyx:registerFile:NoValidPaths</span>
<span class="comment">% Alyx:updateNarrative:UploadFailed</span>
<span class="comment">%</span>
<span class="comment">% Alyx:getFile:InvalidID</span>
<span class="comment">% Alyx:getExpRef:InvalidID</span>
<span class="comment">% Alyx:getFile:InvalidType</span>
<span class="comment">% Alyx:expFilePath:InvalidType</span>
<span class="comment">% Alyx:url2Eid:InvalidURL</span>
<span class="comment">%</span>
<span class="comment">% toStr:isstruct:Unfinished</span>
<span class="comment">%</span>
<span class="comment">% squeak.hw</span>
<span class="comment">% shape:error</span>
<span class="comment">% window:error</span>
</pre><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2019a</a><br></p></div><!--
##### SOURCE BEGIN #####
%% Troubleshooting
% Often finding the source of a problem seems daunghting when faced with a
% huge Rigbox error stack.  Below are some tips on how to quickly get to
% the root of the issue and hopefully solve it.


%%% Update the code
% Check what version of the code you're using and that you're up-to-date:
git.runCmd('status'); % Tells me what branch I'm on
git.update(0); % Update now

% If you're on a development or feature branch try moving to the master
% branch, which should be most stable.  
git.runCmd('checkout master'); git.update(0);


%%% Examining the stack
% Don't be frightened by a wall of red text!  Simply start from the top and
% work out what the errors might mean and what part of code they came from.
% The error at the top is the one that ultimately caused the crash.  Try to
% determine if this is a MATLAB builtin function, e.g. 
%
%   Warning: Error occurred while executing the listener callback for event UpdatePanel defined for class eui.SignalsTest:
%   Error using griddedInterpolant
%   Interpolation requires at least two sample points in each dimension.
% 
%   Error in interp1 (line 151)
%   F = griddedInterpolant(X,V,method);
%
%   TODO Add better example of builtin errors
%
% If you're debugging a signals experiment definition, check for the line
% in your experiment where this particular builtin function was called. NB:
% You can check whether it is specific to your experiment by running one of
% the example experiment definitions such as advancedChoiceWorld.m, found
% in signals/docs/examples.  If this runs without error then you're problem
% may be specific to your experiment.  You should see the name of your
% definition function and exp.SignalsExp in the stack if they are involved.
%
% If you don't know what a function is, try checking the documentation.
% Consider the following:
%
%  Error using open
%  Invalid number of channels
%
%  Error in audstream.fromSignal (line 16)
%    id = audstream.open(sampleRate, nChannels, devIdx);
%  [...]
%
% If you're unsure what `audstream.fromSignal` does, try typing `doc
% audstream`.  This should tell you that the package deals with audio
% devices in signals.  In this case the issue might be that your audio
% settings are incorrect.  Take a look at the audio section of
% `docs\setup\hardware_config.m` and see if you can setup your audio
% devices differently.


%%% Paths
% By far the most common issue in Rigbox relates to problems with the
% MATLAB paths.  Check the following:
% 
% # Do you have a paths file in the +dat package?
%  Check the location by running `which dat.paths`.  Check that a file is
%  on the paths and that it's the correct one.
% # Check the paths set in this file.
%  Run `p = dat.paths` and inspect the output.  Perhaps a path is set
%  incorrectly for one of the fields.  Note that custom rig paths overwrite
%  those written in your paths file.  More info found in
%  `using_dat_package` and `paths_template`.
% # Do you have path conflicts?  
%  Make sure MATLAB's set paths don't include other functions that have the
%  same name as Rigbox ones.  Note that any functions in ~/Documents/MATLAB
%  take precedence over others.  If you keep seeing the following warning
%  check that you've set the paths correctly: 
%   Warning: Function system has the same name as a MATLAB builtin. We
%   suggest you rename the function to avoid a potential name conflict.
%  This warning can occur if the tests folder has been added to the paths
%  by mistake.  Always set the paths by running `addRigboxPaths` and never
%  set them manually as some folders should not be visible to MATLAB.
% # Check your working directory
%  MATLAB prioritizes functions found in your working directory over any
%  others in your path list so try to change into a 'safe' folder before
%  re-running your code:
%   pwd % display working directory
%   cd ~/Documents/MATLAB
% # Check your variable names
%  Make sure your variable names don't shadow a function or package in
%  Rigbox, for instance if in an experiment definition you create a varible
%  called `vis`, you will no longer be able to access functions in the +vis
%  package from within the function:
%   vis = 23;
%   img = vis.image(t);
%   Error: Reference to non-existent field 'image'.


%%% Reverting
% If these errors only started occuring after updating the code,
% particularly if you hadn't updated in a long time, try reverting to the
% previous version of the code.  This can help determine if the update
% really was the culprit and will allow you to keep using the code on
% outdated machines.  Previous stable releases can be found on the Github
% page under releases.  NB: For the most recent stable code always pull
% directly from the master branch


%%% Posting an issue on Github
% If you're completely stumped, open an issue on the Rigbox Github page (or
% alyx-matlab if you think it's related to the Alyx database).  When
% creating an issue, read the bug report template carefully and be sure to
% provide as much information as possible.
%
% If you tracked down the problem but found the error to be confusing or
% too vague, feel free to post a feature request describing how better to
% present the error.  This is an area in need of improvment. You could also
% make a change yourself and submit a pull request.  For more info see
% CONTRIBUTING.md


%% FAQ
% Below are some frequently asked questions and suggestions for fixing
% them.  Note there are plenty of other FAQs in the various setup scripts
% with more specific information.


%% Error and warning IDs
% Below is a list of Rigbox error & warning IDs.  This list is currently
% incomplete and there aren't yet very standard.  Typically the ID has the
% following structure: module:package:function:error
%
% These are here for search convenience and may soon contain more detailed
% troubleshooting information.

% ..:..:..:copyPaths
% Problem:
%  In order to load various essential configuration files, and to load and
%  save experimental data, user specific paths must be retrieved via calls
%  to |dat.paths|.  This error means the function is not on MATLAB's search
%  path.
%
% Solution:
%  Add your +dat\paths.m file to MATLAB's search path.  A template is
%  present in \docs\setup\paths_template.m.  This file is automatically
%  copied by addRigboxPaths to +dat\.  If you haven't already done so, run
%  |addRigboxPaths| to ensure all other paths have been correctly set.  
%
%  See also README.md for further setup information.
%
% IDs
%  Rigbox:git:update:copyPaths
%  signals:test:copyPaths

% ..:..:noRemoteFile
% Problem:
%  % TODO Add problem & solution for noRemoteFile error
%
% Solution:
%  
%
% IDs
%  Rigbox:mc:noRemoteFile

% ..:..:..:notInTest
% Problem:
%  This occurs when a mock function is called when the INTEST global
%  variable is not set.  These mock functions shadow Rigbox and builtin
%  functions, meaning they have the same name.
%
% Solution:
%  If this function was called during a test, add the following to the top
%  of your test or in the constructor:
%    global INTEST
%    INTEST = true
%  Ensure that this is cleared during the teardown:
%    addteardown(@clear, INTEST) % If in a class
%    mess = onCleanup(@clear, INTEST) % If in a function
%
%  If the mock in question is a class, set the InTest flag instead of the
%  global variable:
%    mock = MockDialog; % An example using MockDialog class
%    mock.InTest = true;
%    addteardown(@clear, MockDialog) % Clear mock class when done
%    mess = onCleanup(@clear, MockDialog) % If in a function
%
%  If you are in not running tests, ensure that tests/fixtures is not in
%  your MATLAB path and that you are in a different working directory.  It
%  is best to remove all Rigbox paths and readd them using `addRigboxPaths`
%
% IDs
%  Rigbox:tests:system:notInTest
%  Rigbox:tests:modDate:notInTest
%  Rigbox:tests:paths:notInTest
%  Rigbox:tests:pnet:notInTest
%  Rigbox:tests:modDate:missingTestFlag % TODO change name
%  Rigbox:MockDialog:newCall:InTestFalse

% ..:..:..:behaviourNotSet
% Problem:
%  A mock function was called while in a test, however the behaviour for
%  this particular input has not been defined.
%
% Solution:
%  If not testing a specific behavior for this function's output, simply
%  supress the warning in your test, remembering to restore the warning
%  state:
%    origState = warning;
%    addteardown(@warning, origState) % If in a class
%    mess = onCleanup(@warning, origState) % If in a function
%    warning('Rigbox:MockDialog:newCall:behaviourNotSet', 'off')
%
%  If you're specifically testing the behavior when the mock returns a
%  particular output then check that you've set the input-output map
%  correctly: usually this is done by first calling the mock with input
%  identical to function under test as well as the output you want to see.
%  Check the input is formatted correctly.  For more information see the
%  help of the particular mock you are using.
%    
% IDs
%  Rigbox:tests:system:valueNotSet % TODO change name
%  Rigbox:MockDialog:newCall:behaviourNotSet
%  

% ..:..:mkdirFailed
% Problem:
%  MATLAB was unable to create a new folder on the system.
%
% Solution:
%  In general Rigbox code only creates new folders when a new experiment is
%  created.  The folders are usually created in the localRepository and
%  mainRepository locations that are set in your paths file.  If either of
%  these are remote (e.g. a server accessed via SMB) check that you can
%  navigate to the location in Windows' File Explorer (sometimes the access
%  credentials need setting first).  If you can, next check the permissions
%  of these locations.  If the folders are read-only, MATLAB will not be
%  able to create a new experiment folder there.  Either change the
%  permissions or set a different path in |dat.paths|.  One final thing to
%  check is that the folder names are valid: the presence of a folder that
%  is not correctly numbered in the subject's date folder may lead to an
%  invalid expRef.  Withtin a date folder there should only be folders name
%  '1', '2', '3', etc.
%
% IDs
%  Alyx:newExp:mkdirFailed
%  Rigbox:dat:newExp:mkdirFailed
%

% ..:newExp:expFoldersAlreadyExist
% Problem:
%  The folder structure for a newly generated experiment reference is
%  already in place.
%
%  Experiment references are generated based on subject name, today's date
%  and the experiment number, which is found by looking at the folder
%  structure of the main repository.  In a subject's experiment folder for
%  a given date there are numbered folders.  When running a new experiment,
%  the code takes the folder name with the largest number and adds 1.  It
%  then checks that this numbered folder doesn't exist in the other
%  repositories.  If it does, an error is thrown so that no previous
%  experiment data is overwritten.  
%
% Solution:
%  Check the folder structure for all your repositories (namely the
%  localRepository and mainRepository set in |dat.paths|).  It may be that
%  there is an empty experiment folder in the localRepository but not the
%  mainRepository, in which case you can delete it.  Alternatively, if you
%  find a full experiment folder in the local but not the main, copy it
%  over so that the two match.  This will avoid a duplicate expRef being
%  created (remember, new expRefs are created based on the folder structure
%  of the mainRepository only).
%
% IDs
%  Alyx:newExp:expFoldersAlreadyExist
%  Rigbox:dat:newExp:expFoldersAlreadyExist
%

% ..:..:expRefNotFound
% Problem:
%  The experiment reference string does not correspond to the folder
%  structure in your mainRepository path.  Usually determined via a call to
%  |dat.expExists|.
%
% Solution:
%  Check that the mainRepository paths are the same on both the computer
%  that creates the experiment (e.g. MC) and the one that loads the
%  experiment (e.g. the one that runs |srv.expServer|).  For an experiment
%  to exist, the subject > date > sequence folder structure should exist in
%  the mainRepository.  To see the mainRepository location, run the
%  following:
%    getOr(dat.paths, 'mainRepository')
%  For example if the output is '\\server\Subjects\' then for the expRef
%  '2019-11-25_1_test' to exist, the following folder should exist:
%  \\server\Subjects\test\2019-11-25\1
%
% IDs
%  Rigbox:srv:expServer:expRefNotFound

% REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH- ! PTB - ERROR: SYNCHRONIZATION FAILURE ! REPLACE_WITH_DASH_DASHREPLACE_WITH_DASH_DASH
% Problem:
%   To quote PsychToolbox: One or more internal checks indicate that
%   synchronization of Psychtoolbox to the vertical retrace (VBL) is not
%   working on your setup.This will seriously impair proper stimulus
%   presentation and stimulus presentation timing!
%
% Solution:
%   There are many, many reasons for this error.  Here's a quick list of
%   things to try, in order: 
%
%   # Simply re-trying a couple of times.  Sometimes it happens
%   sporadically.
%   # Check the monitor(s) are on and plugged in.  If you're using
%   multiple monitors they should be of the same make and model.  If they
%   aren't, try with just one monitor first.
%   # If you're using multiple screens in NVIDEA's 'Mosaic' mode, the 
%   settings may have changed: sometimes Mosiac becomes deactivated and you
%   should set it up again.
%   # If you're using a remote connection for that computer it may be
%   interfering with the graphics settings.  Examples of a remote
%   connection include VNC servers, TeamViewer and Windows Remote Desktop.
%   Try opening the PTB Window without any of these remote services.
%   # Update the graphics card drivers and firmware.  This often helps.
%   # Read the PTB docs carefully and follow their suggestions.  The docs
%   can be found at http://psychtoolbox.org/docs/SyncTrouble.
%   # If all else fails.  You can skip these tests and check that there is
%   no taring manually.  This is not recommended but can be done by setting
%   your stimWindow object's PtbSyncTests property to false:
%     stimWindow = getOr(hw.devices([],false), 'stimWindow');
%     stimWindow.PtbSyncTests = false;
%     hwPath = fullfile(getOr(dat.paths, 'rigConfig'), 'hardware.mat');
%     save(hwPath, 'stimWindow', '-append')

%%% Undocumented IDs
%  Below is a list of all error and warning ids.  

% Rigbox:git:runCmd:nameValueArgs
% Rigbox:git:runCmd:gitNotFound
% Rigbox:git:update:valueError
%
% Rigbox:hw:calibrate:noscales
% Rigbox:hw:calibrate:deadscale
% Rigbox:hw:calibrate:partialPVpair
%
% Rigbox:srv:unexpectedUDPResponse
% Rigbox:srv:unexpectedUDP
% Rigbox:srv:expServer:noHardwareConfig
%
% Rigbox:dat:expPath:NotEnoughInputs
% Rigbox:exp:SignalsExp:NoScreenConfig
% Rigbox:exp:Parameters:wrongNumberOfColumns
%
% Rigbox:dat:expFilePath:NotEnoughInputs
%
% Rigbox:MockDialog:newCall:EmptySeq
%
% Rigbox:exp:SignalsExp:noTokenSet
%
% Rigbox:eui:choiceExpPanel:toolboxRequired
% Rigbox:setup:toolboxRequired
%
% Alyx:newExp:subjectNotFound
% Alyx:registerFile:InvalidPath
% Alyx:registerFile:UnableToValidate
% Alyx:registerFile:EmptyDNSField
% Alyx:registerFile:InvalidRepoPath
% Alyx:registerFile:InvalidFileType
% Alyx:registerFile:InvalidFileName
% Alyx:registerFile:NoValidPaths
% Alyx:updateNarrative:UploadFailed
%
% Alyx:getFile:InvalidID
% Alyx:getExpRef:InvalidID
% Alyx:getFile:InvalidType
% Alyx:expFilePath:InvalidType
% Alyx:url2Eid:InvalidURL
%
% toStr:isstruct:Unfinished
%
% squeak.hw
% shape:error
% window:error

##### SOURCE END #####
--></body></html>